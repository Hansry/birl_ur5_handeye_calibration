# birl_ur5_handeye_calibration

This meta-package is developed for UR5 hand-eye calibration with an ensenso 3D camera. ur5_ensenso_description contains URDF describing the mechanical setup, while ur5_handeye_calibration_moveit_config is generated by moveit setup assistant based on such setup. ur5_handeye_calibration is used for moving UR, collecting images and peroforming the final calibration computation.

## Intallation
### Install birl_ur5_handeye_calibration

Go to you ROS workspace
```{bash}
cd ~/catkin_ws/src
```

Clone this repo
```{bash}
git clone https://github.com/birlrobotics/birl_ur5_handeye_calibration.git
```

### Install EnsensoSDK and uEyeDriver

Go to the [offical website](http://www.ensenso.com/support/sdk-download/) and follow the instructions

### Install birl_ensenso

Go to you ROS workspace
```{bash}
cd ~/catkin_ws/src
```

Clone birl_ensenso
```{bash}
git clone https://github.com/birlrobotics/birl_ensenso.git
```

### Install ur_modern_driver

Go to you ROS workspace
```{bash}
cd ~/catkin_ws/src
```

Clone ur_modern_driver
```{bash}
git clone https://github.com/ThomasTimm/ur_modern_driver.git
```

## Usage

Activate the UR driver. Mak sure you have the correct [network configuration](http://wiki.ros.org/universal_robot/Tutorials/Getting%20Started%20with%20a%20Universal%20Robot%20and%20ROS-Industrial) and have the cable connected to UR. 
```
roslaunch ur_modern_driver ur5_bringup.launch  
```

Start move group node for UR.
```
roslaunch ur5_handeye_calibration_moveit_config ur5_moveit_planning_execution.launch
```

Or you can start it in simulaiton mode.
```
roslaunch ur5_handeye_calibration_moveit_config ur5_moveit_planning_execution.launch sim:=true
```

Launch ensenso camera node. Make sure you already have the camera connected to the PC.
```
roslaunch ensenso ensenso_bringup.launch
```

Finally, start the hand-eye calibration.
```
roslaunch ur5_handeye_calibration hand_eye_calibration.launch
```
Pay attention to the parameters in the launch file. Please change them accordingly.

## Test in simulation
Try following commands to check whether these packages can work.

```
roslaunch ur_gazebo ur5.launch
```

```
roslaunch ur5_handeye_calibration_moveit_config ur5_moveit_planning_execution.launch sim:=true
```

```
roslaunch ensenso ensenso_bringup.launch
```
Note that you still have to connect the camera to computer before launching the camera.

```
roslaunch ur5_handeye_calibration hand_eye_calibration.launch
```

Now, look at gazebo and check if UR is moving for capturing images from different viewpoints.
